
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™ºèƒ½éŸ³ä¹äº¤æ˜“çœ‹æ¿</title>
    <style>
        body {
            margin: 0;
            padding: 10px;
            background: transparent;
            font-family: Arial, sans-serif;
        }
        .container {
            width: 500px;
            height: 350px;
            background: rgba(0, 0, 0, 0.95);
            border-radius: 10px;
            padding: 15px;
            border: 2px solid #333;
        }
        
        /* æŒ‡æ•°æ˜¾ç¤ºåŒºåŸŸ */
        .indices-section {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 8px;
            margin-bottom: 10px;
        }
        
        .index-card {
            background: rgba(40, 40, 60, 0.8);
            border-radius: 6px;
            padding: 8px;
            border-left: 3px solid #666;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .index-card.active {
            background: rgba(60, 80, 100, 0.9);
            border-left: 3px solid gold;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }
        
        .index-card:hover {
            transform: scale(1.02);
        }
        
        .index-name {
            color: #ccc;
            font-size: 11px;
            margin-bottom: 3px;
        }
        
        .index-price {
            color: white;
            font-size: 14px;
            font-weight: bold;
            margin: 2px 0;
        }
        
        .index-change {
            font-size: 10px;
            font-weight: bold;
        }
        
        .positive { color: #00ff00; }
        .negative { color: #ff0000; }
        .neutral { color: #cccccc; }
        
        /* å›¾è¡¨åŒºåŸŸ */
        .chart-container {
            width: 100%;
            height: 160px;
            margin-bottom: 10px;
            background: rgba(30, 30, 45, 0.8);
            border-radius: 4px;
            overflow: hidden;
        }
        
        /* æŠ•ç¥¨å’ŒéŸ³ä¹åŒºåŸŸ */
        .control-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            height: 80px;
        }
        
        .voting-area {
            background: rgba(50, 50, 70, 0.7);
            border-radius: 6px;
            padding: 8px;
        }
        
        .voting-title {
            color: #ccc;
            font-size: 11px;
            text-align: center;
            margin-bottom: 5px;
        }
        
        .lights-container {
            display: flex;
            gap: 10px;
            justify-content: center;
        }
        
        .light-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .light {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid #555;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 12px;
        }
        
        .light:hover {
            transform: scale(1.2);
            border-color: gold;
        }
        
        .green { background-color: #00ff00; }
        .red { background-color: #ff0000; }
        .white { background-color: #ffffff; }
        
        /* é¢œè‰²æ·±åº¦çº§åˆ« */
        .green.level-1 { background-color: #00ff00; }
        .green.level-2 { background-color: #00cc00; }
        .green.level-3 { background-color: #009900; }
        .green.level-4 { background-color: #006600; }
        .green.level-5 { background-color: #004400; }
        
        .red.level-1 { background-color: #ff0000; }
        .red.level-2 { background-color: #cc0000; }
        .red.level-3 { background-color: #990000; }
        .red.level-4 { background-color: #660000; }
        .red.level-5 { background-color: #440000; }
        
        .white.level-1 { background-color: #ffffff; }
        .white.level-2 { background-color: #cccccc; }
        .white.level-3 { background-color: #999999; }
        .white.level-4 { background-color: #666666; }
        .white.level-5 { background-color: #444444; }
        
        .vote-count {
            font-size: 10px;
            color: #ccc;
            margin-top: 3px;
            font-weight: bold;
        }
        
        /* éŸ³ä¹æ§åˆ¶åŒºåŸŸ */
        .music-area {
            background: rgba(50, 50, 70, 0.7);
            border-radius: 6px;
            padding: 8px;
        }
        
        .music-title {
            color: #ccc;
            font-size: 11px;
            text-align: center;
            margin-bottom: 5px;
        }
        
        .music-controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }
        
        .music-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            border: none;
            border-radius: 15px;
            color: white;
            padding: 6px 15px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .music-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.5);
        }
        
        .music-status {
            font-size: 10px;
            color: #ccc;
            text-align: center;
        }
        
        .current-track {
            font-size: 9px;
            color: #888;
            text-align: center;
        }
        
        .volume-control {
            width: 80%;
            margin: 3px 0;
        }
        
        /* çŠ¶æ€æŒ‡ç¤ºå™¨ */
        .status-indicator {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            display: inline-block;
            margin-left: 3px;
        }
        
        .debug-info {
            position: absolute;
            top: 5px;
            right: 5px;
            font-size: 8px;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="debug-info" id="debugInfo">çŠ¶æ€: æ­£å¸¸</div>
        
        <!-- æŒ‡æ•°é€‰æ‹©åŒºåŸŸ -->
        <div class="indices-section">
            <div class="index-card active" onclick="selectIndex('btc')">
                <div class="index-name">æ¯”ç‰¹å¸/USDT <span class="status-indicator" id="btcStatus" style="background-color: #ccc;"></span></div>
                <div class="index-price" id="btcPrice">--.--</div>
                <div class="index-change" id="btcChange">0.00%</div>
            </div>
            <div class="index-card" onclick="selectIndex('sh')">
                <div class="index-name">ä¸Šè¯æŒ‡æ•° <span class="status-indicator" id="shStatus" style="background-color: #ccc;"></span></div>
                <div class="index-price" id="shPrice">--.--</div>
                <div class="index-change" id="shChange">0.00%</div>
            </div>
            <div class="index-card" onclick="selectIndex('spx')">
                <div class="index-name">æ ‡æ™®500 <span class="status-indicator" id="spxStatus" style="background-color: #ccc;"></span></div>
                <div class="index-price" id="spxPrice">--.--</div>
                <div class="index-change" id="spxChange">0.00%</div>
            </div>
        </div>
        
        <!-- å›¾è¡¨åŒºåŸŸ -->
        <div class="chart-container">
            <div id="tradingview_chart"></div>
        </div>
        
        <!-- æ§åˆ¶å’ŒéŸ³ä¹åŒºåŸŸ -->
        <div class="control-section">
            <!-- æŠ•ç¥¨åŒºåŸŸ -->
            <div class="voting-area">
                <div class="voting-title">è§‚ä¼—æƒ…ç»ªæŠ•ç¥¨ â†‘â†’â†“</div>
                <div class="lights-container">
                    <div class="light-wrapper" title="çœ‹æ¶¨æŠ•ç¥¨">
                        <div class="light green level-1" onclick="vote('green')">â†‘</div>
                        <div class="vote-count" id="greenCount">0</div>
                    </div>
                    <div class="light-wrapper" title="ä¸­æ€§æŠ•ç¥¨">
                        <div class="light white level-1" onclick="vote('white')">â†’</div>
                        <div class="vote-count" id="whiteCount">0</div>
                    </div>
                    <div class="light-wrapper" title="çœ‹è·ŒæŠ•ç¥¨">
                        <div class="light red level-1" onclick="vote('red')">â†“</div>
                        <div class="vote-count" id="redCount">0</div>
                    </div>
                </div>
            </div>
            
            <!-- éŸ³ä¹æ§åˆ¶åŒºåŸŸ -->
            <div class="music-area">
                <div class="music-title">æ™ºèƒ½èƒŒæ™¯éŸ³ä¹</div>
                <div class="music-controls">
                    <button class="music-btn" onclick="toggleMusic()" id="musicToggle">ğŸµ æ’­æ”¾éŸ³ä¹</button>
                    <div class="music-status" id="musicStatus">é€‰æ‹©æŒ‡æ•°å¼€å§‹</div>
                    <div class="current-track" id="currentTrack">-</div>
                    <input type="range" class="volume-control" min="0" max="100" value="30" oninput="changeVolume(this.value)">
                </div>
            </div>
        </div>
    </div>

    <!-- TradingViewè„šæœ¬ -->
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    
    <script>
        // åˆå§‹åŒ–å˜é‡ - ç®€åŒ–ç‰ˆæœ¬
        let votes = {
            btc: { green: 0, white: 0, red: 0 },
            sh: { green: 0, white: 0, red: 0 },
            spx: { green: 0, white: 0, red: 0 }
        };
        let musicEnabled = false;
        let currentAudio = null;
        let currentIndex = 'btc';
        let globalVolume = 0.3;

        // ä½¿ç”¨æ›´å¯é çš„éŸ³ä¹æº
        const musicLibrary = {
            happy: [
                { 
                    name: "æ¬¢ä¹æ—¶å…‰", 
                    // ä½¿ç”¨å¯é çš„ç¬¬ä¸‰æ–¹éŸ³ä¹æº
                    url: "https://cdn.pixabay.com/download/audio/2022/03/15/audio_d17187f392.mp3?filename=upbeat-happy-ukulele-123277.mp3",
                    intensity: 1 
                },
                { 
                    name: "é˜³å…‰æ˜åªš", 
                    url: "https://cdn.pixabay.com/download/audio/2021/10/25/audio_1a4d1a3e2c.mp3?filename=summer-walk-152722.mp3",
                    intensity: 2 
                }
            ],
            neutral: [
                { 
                    name: "å¹³å’Œå¿ƒå¢ƒ", 
                    url: "https://cdn.pixabay.com/download/audio/2022/03/19/audio_1a6ab45b7d.mp3?filename=ambient-piano-117363.mp3",
                    intensity: 1 
                }
            ],
            sad: [
                { 
                    name: "é›¨ä¸­æ²‰æ€", 
                    url: "https://cdn.pixabay.com/download/audio/2022/03/15/audio_6b8c1f5c4f.mp3?filename=sad-ambient-piano-117364.mp3",
                    intensity: 1 
                }
            ]
        };

        // è°ƒè¯•ä¿¡æ¯
        function debug(message) {
            console.log('DEBUG:', message);
            document.getElementById('debugInfo').textContent = message;
        }

        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
        window.addEventListener('load', function() {
            debug('é¡µé¢åŠ è½½å®Œæˆ');
            loadVotes();
            initTradingView();
            setupIndexData();
            updateDisplay();
            
            // æ·»åŠ ç‚¹å‡»äº‹ä»¶ç›‘å¬å™¨ - ç¡®ä¿æŠ•ç¥¨æŒ‰é’®èƒ½å·¥ä½œ
            document.querySelectorAll('.light').forEach(light => {
                light.addEventListener('click', function() {
                    const color = this.classList[1]; // è·å–é¢œè‰²ç±»å
                    vote(color);
                });
            });
        });

        // é€‰æ‹©æŒ‡æ•°
        function selectIndex(index) {
            debug(`é€‰æ‹©æŒ‡æ•°: ${index}`);
            currentIndex = index;
            
            // æ›´æ–°UIæ˜¾ç¤º
            document.querySelectorAll('.index-card').forEach(card => {
                card.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
            
            // æ›´æ–°æŠ•ç¥¨æ˜¾ç¤º
            updateDisplay();
            
            // å¦‚æœéŸ³ä¹å¼€å¯ï¼Œæ ¹æ®æ–°æŒ‡æ•°è°ƒæ•´éŸ³ä¹
            if (musicEnabled) {
                updateMusicBasedOnMarket();
            }
        }

        // åŠ è½½æŠ•ç¥¨æ•°æ®
        function loadVotes() {
            try {
                const saved = localStorage.getItem('tradingVotes');
                if (saved) {
                    votes = JSON.parse(saved);
                    debug('æŠ•ç¥¨æ•°æ®åŠ è½½æˆåŠŸ');
                } else {
                    debug('æ— ä¿å­˜çš„æŠ•ç¥¨æ•°æ®');
                }
            } catch (e) {
                debug('åŠ è½½æŠ•ç¥¨æ•°æ®å¤±è´¥');
            }
        }

        // ä¿å­˜æŠ•ç¥¨æ•°æ®
        function saveVotes() {
            try {
                localStorage.setItem('tradingVotes', JSON.stringify(votes));
            } catch (e) {
                debug('ä¿å­˜æŠ•ç¥¨æ•°æ®å¤±è´¥');
            }
        }

        // æŠ•ç¥¨åŠŸèƒ½ - ä¿®å¤ç‰ˆæœ¬
        function vote(color) {
            debug(`æŠ•ç¥¨: ${color} for ${currentIndex}`);
            
            if (!votes[currentIndex]) {
                votes[currentIndex] = { green: 0, white: 0, red: 0 };
            }
            
            votes[currentIndex][color]++;
            saveVotes();
            updateDisplay();
            
            // ç‚¹å‡»æ•ˆæœ
            const light = document.querySelector(`.light.${color}`);
            if (light) {
                light.style.transform = 'scale(1.3)';
                light.style.boxShadow = '0 0 15px gold';
                setTimeout(() => {
                    light.style.transform = 'scale(1)';
                    light.style.boxShadow = 'none';
                }, 300);
            }
            
            // å¦‚æœéŸ³ä¹å¼€å¯ï¼Œæ ¹æ®æŠ•ç¥¨è°ƒæ•´éŸ³ä¹
            if (musicEnabled) {
                updateMusicBasedOnVotes();
            }
        }

        // æ›´æ–°æ˜¾ç¤º
        function updateDisplay() {
            const currentVotes = votes[currentIndex] || { green: 0, white: 0, red: 0 };
            debug(`æ›´æ–°æ˜¾ç¤º: ${currentIndex} - ${JSON.stringify(currentVotes)}`);
            
            ['green', 'white', 'red'].forEach(color => {
                const count = currentVotes[color] || 0;
                const countElement = document.getElementById(`${color}Count`);
                if (countElement) {
                    countElement.textContent = count;
                    debug(`è®¾ç½® ${color}Count: ${count}`);
                }
                
                const light = document.querySelector(`.light.${color}`);
                if (light) {
                    const level = Math.min(Math.floor(count / 2) + 1, 5);
                    light.className = `light ${color} level-${level}`;
                }
            });
        }

        // æ ¹æ®æŠ•ç¥¨è°ƒæ•´éŸ³ä¹
        function updateMusicBasedOnVotes() {
            if (!musicEnabled) return;
            
            const currentVotes = votes[currentIndex] || { green: 0, white: 0, red: 0 };
            
            // ç¡®å®šä¸»å¯¼æƒ…ç»ªï¼ˆåŸºäºæŠ•ç¥¨ï¼‰
            let mood = 'neutral';
            if (currentVotes.green > currentVotes.red && currentVotes.green > currentVotes.white) {
                mood = 'happy';
            } else if (currentVotes.red > currentVotes.green && currentVotes.red > currentVotes.white) {
                mood = 'sad';
            }
            
            // ç¡®å®šå¼ºåº¦çº§åˆ«
            const dominantVotes = Math.max(currentVotes.green, currentVotes.red, currentVotes.white);
            let intensity = 1;
            if (dominantVotes >= 5) intensity = 2;
            if (dominantVotes >= 10) intensity = 3;
            
            playMusic(mood, intensity);
        }

        // æ ¹æ®å¸‚åœºè¡Œæƒ…è°ƒæ•´éŸ³ä¹
        function updateMusicBasedOnMarket() {
            if (!musicEnabled) return;
            
            // æ¨¡æ‹Ÿå¸‚åœºæ•°æ®
            const changes = {
                btc: (Math.random() - 0.5) * 3,
                sh: (Math.random() - 0.5) * 2,
                spx: (Math.random() - 0.5) * 1.5
            };
            
            const changePercent = changes[currentIndex] || 0;
            
            let mood = 'neutral';
            if (changePercent > 0.5) mood = 'happy';
            else if (changePercent < -0.5) mood = 'sad';
            
            playMusic(mood, 1);
        }

        // æ’­æ”¾éŸ³ä¹ - ä¿®å¤ç‰ˆæœ¬
        function playMusic(mood, intensity = 1) {
            debug(`æ’­æ”¾éŸ³ä¹: ${mood} å¼ºåº¦: ${intensity}`);
            
            if (!musicEnabled) {
                debug('éŸ³ä¹æœªå¯ç”¨');
                return;
            }
            
            // åœæ­¢å½“å‰éŸ³ä¹
            if (currentAudio) {
                currentAudio.pause();
                currentAudio = null;
            }
            
            const availableTracks = musicLibrary[mood] || musicLibrary.neutral;
            const selectedTrack = availableTracks[0]; // ç®€åŒ–ï¼šæ€»æ˜¯ä½¿ç”¨ç¬¬ä¸€ä¸ªæ›²ç›®
            
            if (selectedTrack && selectedTrack.url) {
                debug(`å°è¯•æ’­æ”¾: ${selectedTrack.name}`);
                
                currentAudio = new Audio();
                currentAudio.src = selectedTrack.url;
                currentAudio.loop = true;
                currentAudio.volume = globalVolume;
                
                // æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
                currentAudio.addEventListener('canplaythrough', function() {
                    debug('éŸ³ä¹å¯ä»¥æ’­æ”¾');
                });
                
                currentAudio.addEventListener('error', function(e) {
                    debug(`éŸ³ä¹æ’­æ”¾é”™è¯¯: ${e.target.error.code}`);
                    document.getElementById('musicStatus').textContent = 'éŸ³ä¹åŠ è½½å¤±è´¥';
                });
                
                currentAudio.addEventListener('playing', function() {
                    debug('éŸ³ä¹å¼€å§‹æ’­æ”¾');
                    const moodText = mood === 'happy' ? 'ğŸ‰ æ¬¢å¿«' : mood === 'sad' ? 'ğŸ˜¢ æ‚²ä¼¤' : 'ğŸ˜ å¹³å’Œ';
                    document.getElementById('musicStatus').textContent = `${moodText} éŸ³ä¹`;
                    document.getElementById('currentTrack').textContent = `${selectedTrack.name} Lv.${intensity}`;
                });
                
                // å°è¯•æ’­æ”¾
                const playPromise = currentAudio.play();
                
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        debug('éŸ³ä¹æ’­æ”¾æˆåŠŸ');
                    }).catch(error => {
                        debug(`æ’­æ”¾è¢«é˜»æ­¢: ${error}`);
                        document.getElementById('musicStatus').textContent = 'ç‚¹å‡»å…è®¸æ’­æ”¾';
                    });
                }
            } else {
                debug('æœªæ‰¾åˆ°åˆé€‚çš„éŸ³ä¹æ›²ç›®');
            }
        }

        // åˆ‡æ¢éŸ³ä¹å¼€å…³ - ä¿®å¤ç‰ˆæœ¬
        function toggleMusic() {
            debug(`åˆ‡æ¢éŸ³ä¹çŠ¶æ€: ${musicEnabled ? 'å…³é—­' : 'å¼€å¯'}`);
            
            if (!musicEnabled) {
                // å…ˆå°è¯•æ’­æ”¾ä¸€ä¸ªæ— å£°éŸ³é¢‘æ¥è·å¾—ç”¨æˆ·äº¤äº’è®¸å¯
                const silentAudio = new Audio();
                silentAudio.src = "data:audio/wav;base64,UklGRnoAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoAAAC";
                
                silentAudio.play().then(() => {
                    silentAudio.pause();
                    musicEnabled = true;
                    document.getElementById('musicToggle').textContent = 'â¹ï¸ åœæ­¢éŸ³ä¹';
                    document.getElementById('musicStatus').textContent = 'éŸ³ä¹å¼€å¯ä¸­...';
                    
                    // ç­‰å¾…ä¸€ä¸‹å†æ’­æ”¾éŸ³ä¹
                    setTimeout(() => {
                        updateMusicBasedOnMarket();
                    }, 500);
                    
                }).catch(e => {
                    debug('éœ€è¦ç”¨æˆ·äº¤äº’');
                    alert('è¯·å…ˆç‚¹å‡»é¡µé¢ä»»æ„ä½ç½®ï¼Œç„¶åå†æ¬¡ç‚¹å‡»æ’­æ”¾æŒ‰é’®');
                });
            } else {
                musicEnabled = false;
                document.getElementById('musicToggle').textContent = 'ğŸµ æ’­æ”¾éŸ³ä¹';
                if (currentAudio) {
                    currentAudio.pause();
                    currentAudio = null;
                }
                document.getElementById('musicStatus').textContent = 'éŸ³ä¹å·²åœæ­¢';
                document.getElementById('currentTrack').textContent = '-';
            }
        }

        // è°ƒæ•´éŸ³é‡
        function changeVolume(value) {
            globalVolume = value / 100;
            if (currentAudio) {
                currentAudio.volume = globalVolume;
            }
            debug(`éŸ³é‡è°ƒæ•´: ${value}%`);
        }

        // åˆå§‹åŒ–TradingViewå›¾è¡¨
        function initTradingView() {
            if (typeof TradingView !== 'undefined') {
                new TradingView.widget({
                    "width": "100%",
                    "height": "160",
                    "symbol": "BINANCE:BTCUSDT",
                    "interval": "5",
                    "timezone": "Asia/Shanghai",
                    "theme": "dark",
                    "style": "1",
                    "locale": "zh_CN",
                    "enable_publishing": false,
                    "hide_top_toolbar": true,
                    "hide_legend": true,
                    "hide_side_toolbar": true,
                    "container_id": "tradingview_chart"
                });
                debug('TradingViewå›¾è¡¨åˆå§‹åŒ–å®Œæˆ');
            }
        }

        // è®¾ç½®æŒ‡æ•°æ•°æ®
        function setupIndexData() {
            debug('å¼€å§‹è®¾ç½®æŒ‡æ•°æ•°æ®');
            
            // åˆå§‹åŒ–æ•°æ®
            updateIndexData('btc', 45000.00, 0.0);
            updateIndexData('sh', 3200.45, 0.0);
            updateIndexData('spx', 4450.32, 0.0);
            
            // æ¨¡æ‹Ÿå®æ—¶æ›´æ–°
            setInterval(() => {
                updateIndexData('btc', 45000 + (Math.random() - 0.5) * 1000, (Math.random() - 0.5) * 3);
                updateIndexData('sh', 3200 + (Math.random() - 0.5) * 50, (Math.random() - 0.5) * 2);
                updateIndexData('spx', 4450 + (Math.random() - 0.5) * 30, (Math.random() - 0.5) * 1.5);
                
                if (musicEnabled) {
                    updateMusicBasedOnMarket();
                }
            }, 3000);
        }

        // æ›´æ–°æŒ‡æ•°æ˜¾ç¤º
        function updateIndexData(index, price, changePercent) {
            const priceElement = document.getElementById(`${index}Price`);
            const changeElement = document.getElementById(`${index}Change`);
            const statusElement = document.getElementById(`${index}Status`);
            
            if (priceElement) priceElement.textContent = price.toFixed(2);
            if (changeElement) {
                changeElement.textContent = `${changePercent >= 0 ? '+' : ''}${changePercent.toFixed(2)}%`;
                changeElement.className = `index-change ${changePercent > 0 ? 'positive' : changePercent < 0 ? 'negative' : 'neutral'}`;
            }
            if (statusElement) {
                statusElement.style.backgroundColor = changePercent > 0 ? '#00ff00' : changePercent < 0 ? '#ff0000' : '#cccccc';
            }
        }

        // é‡ç½®å½“å‰æŒ‡æ•°çš„æŠ•ç¥¨
        function resetVotes() {
            if (confirm(`ç¡®å®šè¦é‡ç½®${currentIndex.toUpperCase()}çš„æŠ•ç¥¨å—ï¼Ÿ`)) {
                votes[currentIndex] = { green: 0, white: 0, red: 0 };
                saveVotes();
                updateDisplay();
                if (musicEnabled) {
                    updateMusicBasedOnMarket();
                }
            }
        }

        // å³é”®èœå•é‡ç½®
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
            resetVotes();
        });

        // æ·»åŠ å…¨å±€ç‚¹å‡»äº‹ä»¶å¤„ç† - è§£å†³éŸ³é¢‘è‡ªåŠ¨æ’­æ”¾é—®é¢˜
        document.addEventListener('click', function() {
            debug('é¡µé¢è¢«ç‚¹å‡»ï¼ŒéŸ³é¢‘ä¸Šä¸‹æ–‡å·²æ¿€æ´»');
        });
    </script>
</body>
</html>
